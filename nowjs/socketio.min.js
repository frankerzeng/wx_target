define(function(c){var a=null;var b={ip:"127.0.0.1",dns:"localhost",port:"3002",serverReceiver:"message",clientReceiver:"message",events:{}};var d=function(e){this.options={};this.events={};this.namespace=e;this.isInit=false;this.bcd="10000";this.defaultEvents=["connect","message","error","online","offline","disconnect"];this.connect=function(f){console.log("服务连接成功")};this.message=function(f){console.log("服务端消息返回")};this.online=function(f){console.log("上线消息提醒")};this.offline=function(f){console.log("离线消息提醒")};this.disconnect=function(f){console.log("连接断开")};this.error=function(f){console.log("发生错误了")}};d.prototype={constructor:d,open:function(e){var j=this;var i=j.options=$.extend(b,e);var g="http://"+(i.dns!=="localhost"?i.dns:i.ip)+":"+i.port+"/",f="http://"+(i.dns!=="localhost"?i.dns:i.ip)+":"+i.port+"/";var h=f+"socket.io/socket.io.js";$.getScript(h,function(){if(a!==null){a.disconnect()}a=io.connect(g,{"max reconnection attempts":10});j.isInit=true;$.each(j.defaultEvents,function(k,l){j.on(l,j[l])});$.each(i.events,function(m,l){if($.inArray(m,j.defaultEvents)>-1){j.off(m)}j.on(m,l)})});return this},reOpen:function(){var e=this;e.open(e.options);return this},testConnect:function(){return a!==null?true:false},clone:function(e){},_isInit:function(e){if(!this.isInit&&e){throw new Error("socket未完成初始化")}return this.isInit},on:function(f,e){if(f){a.on(f,function(){if(e&&typeof e==="function"){if(arguments.length===1){e(arguments[0])}else{e(arguments[0],arguments[1])}}})}return this},off:function(e){if(a!==null){a.off(e)}return this},emit:function(h,f,e){this._isInit(true);var g=this;if(h!==""){if($.inArray(h,g.defaultEvents)>-1){if(typeof e!=="function"){a.emit(h,f)}else{a.emit(h,f,e)}}else{g.error({_c:1,_m:"socketio.emit:事件类型"+h+"不可用!"})}}return this},destory:function(){if(a!==null){a.emit("disconnect",{});a.disconnect()}},_send:function(){this._isInit(true);var h=this;var g={},f=h.options.serverReceiver,e=null;if(arguments.length===0){console.log("请指定需要发送的内容")}if(arguments.length===2){g=arguments[0];e=arguments[1]}else{g=arguments[0]}if(g._c===undefined){h.error({_c:1,_m:"_c参数未添加"})}g.bcd=g.bcd?g.bcd:h.bcd;if(e===null){h.emit(f,g)}else{h.emit(f,g,e)}},send_msg:function(){var e=this;if(arguments.length===1){e._send(arguments[0])}else{e._send(arguments[0],arguments[1])}}};return new d("_sk_init")});